<?php
// ini_set('display_errors', 1);
// error_reporting(E_ALL);
require_once('phpscripts/config.php');

if(isset($_GET['filter'])){
	$tbl = "tbl_movies";
	$tbl2 = "tbl_genre";
	$tbl3 = "tbl_mov_genre";
	$col = "movies_id";
	$col2 = "genre_id";
	$col3 = "genre_name";
	$filter = "action";
	$getMovies = filterResults($tbl, $tbl2, $tbl3, $col, $col2, $col3, $filter);

}else{
$tbl = "tbl_movies";
$getMovies = getAll($tbl);//calls your function with the variable
}

?>


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" type="text/css" href="css/style.css">
    {{#if kidsmode}}
    <link rel="stylesheet" type="text/css" href="css/kids.css">
    {{else}}
    <link rel="stylesheet" type="text/css" href="css/style.css">
  {{/if}}
  <title>Roku</title>
</head>
<body>
{{{ body }}}

<?php

	if(!is_string($getMovies)){//if this is not a string (which makes it an object)

		while($row = mysqli_fetch_array($getMovies)){
			echo "<img src=\"images/{$row['movies_cover']}\" alt=\"{$row['movies_title']}\">
			<h2>{$row['movies_title']}</h2>
			<p>{$row['movies_year']}</p>
			<a href=\"details.php?id={$row['movies_id']}\">More Details...</a> <br><br>";
		}
	} else {
		echo "<p class=\"error\">{$getMovie}<p>"; //the other slash makes it literal.. literally a quote
	}

?>
</body>
</html>
